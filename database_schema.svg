<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1200" height="1600" xmlns="http://www.w3.org/2000/svg">
    <style>
        .entity {
            fill: #f5f5f5;
            stroke: #333;
            stroke-width: 2;
        }
        .entity-title {
            fill: #4a86e8;
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
        }
        .entity-attribute {
            fill: #333;
            font-family: Arial, sans-serif;
            font-size: 12px;
        }
        .primary-key {
            font-weight: bold;
        }
        .foreign-key {
            fill: #6aa84f;
        }
        .relationship {
            stroke-width: 2;
            fill: none;
        }
        .rel-primary {
            stroke: #4a86e8;
        }
        .rel-secondary {
            stroke: #6aa84f;
        }
        .rel-fts {
            stroke: #9c27b0;
        }
        .rel-junction {
            stroke: #e69138;
        }
        .cardinality {
            fill: #333;
            font-family: Arial, sans-serif;
            font-size: 12px;
            font-weight: bold;
        }
        .section-title {
            fill: #333;
            font-family: Arial, sans-serif;
            font-size: 20px;
            font-weight: bold;
        }
        .subsection-title {
            fill: #666;
            font-family: Arial, sans-serif;
            font-size: 16px;
            font-weight: bold;
        }
        .fts-entity {
            fill: #e6f2ff;
            stroke: #333;
            stroke-width: 2;
        }
        .junction-entity {
            fill: #fff2cc;
            stroke: #333;
            stroke-width: 2;
        }
        .group-box {
            fill: none;
            stroke: #999;
            stroke-width: 1;
            stroke-dasharray: 5,5;
        }
        .group-label {
            fill: #666;
            font-family: Arial, sans-serif;
            font-size: 14px;
            font-style: italic;
        }
        .arrow {
            fill: #333;
        }
    </style>

    <!-- Title -->
    <text x="600" y="30" text-anchor="middle" class="section-title">JMDict and Kanjidic2 Database Schema</text>
    
    <!-- JMDict Section Title -->
    <text x="400" y="60" text-anchor="middle" class="section-title">JMDict Tables</text>
    
    <!-- Core Tables Group Box -->
    <rect x="50" y="80" width="500" height="380" rx="5" ry="5" class="group-box" />
    <text x="70" y="100" class="group-label">Core Tables</text>
    
    <!-- jmdict_entries -->
    <rect x="70" y="120" width="200" height="70" rx="5" ry="5" class="entity" />
    <text x="170" y="140" text-anchor="middle" class="entity-title">jmdict_entries</text>
    <line x1="70" y1="150" x2="270" y2="150" stroke="#333" stroke-width="1" />
    <text x="80" y="170" class="entity-attribute primary-key">id (TEXT) PK</text>
    <text x="80" y="185" class="entity-attribute">entry_sequence (INTEGER)</text>
    
    <!-- jmdict_kanji -->
    <rect x="70" y="240" width="200" height="100" rx="5" ry="5" class="entity" />
    <text x="170" y="260" text-anchor="middle" class="entity-title">jmdict_kanji</text>
    <line x1="70" y1="270" x2="270" y2="270" stroke="#333" stroke-width="1" />
    <text x="80" y="290" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="80" y="305" class="entity-attribute foreign-key">entry_id (TEXT) FK</text>
    <text x="80" y="320" class="entity-attribute">text (TEXT)</text>
    <text x="80" y="335" class="entity-attribute">common (BOOLEAN)</text>
    
    <!-- jmdict_kana -->
    <rect x="70" y="350" width="200" height="100" rx="5" ry="5" class="entity" />
    <text x="170" y="370" text-anchor="middle" class="entity-title">jmdict_kana</text>
    <line x1="70" y1="380" x2="270" y2="380" stroke="#333" stroke-width="1" />
    <text x="80" y="400" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="80" y="415" class="entity-attribute foreign-key">entry_id (TEXT) FK</text>
    <text x="80" y="430" class="entity-attribute">text (TEXT)</text>
    <text x="80" y="445" class="entity-attribute">common (BOOLEAN)</text>
    
    <!-- jmdict_sense -->
    <rect x="330" y="120" width="200" height="70" rx="5" ry="5" class="entity" />
    <text x="430" y="140" text-anchor="middle" class="entity-title">jmdict_sense</text>
    <line x1="330" y1="150" x2="530" y2="150" stroke="#333" stroke-width="1" />
    <text x="340" y="170" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="340" y="185" class="entity-attribute foreign-key">entry_id (TEXT) FK</text>
    
    <!-- jmdict_gloss -->
    <rect x="330" y="240" width="200" height="130" rx="5" ry="5" class="entity" />
    <text x="430" y="260" text-anchor="middle" class="entity-title">jmdict_gloss</text>
    <line x1="330" y1="270" x2="530" y2="270" stroke="#333" stroke-width="1" />
    <text x="340" y="290" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="340" y="305" class="entity-attribute foreign-key">sense_id (INTEGER) FK</text>
    <text x="340" y="320" class="entity-attribute">text (TEXT)</text>
    <text x="340" y="335" class="entity-attribute">lang (TEXT)</text>
    <text x="340" y="350" class="entity-attribute">gender (TEXT)</text>
    <text x="340" y="365" class="entity-attribute">type (TEXT)</text>
    
    <!-- Relationship Tables Group Box -->
    <rect x="580" y="80" width="250" height="380" rx="5" ry="5" class="group-box" />
    <text x="600" y="100" class="group-label">Relationship Tables</text>
    
    <!-- jmdict_kana_to_kanji -->
    <rect x="605" y="120" width="200" height="70" rx="5" ry="5" class="junction-entity" />
    <text x="705" y="140" text-anchor="middle" class="entity-title">jmdict_kana_to_kanji</text>
    <line x1="605" y1="150" x2="805" y2="150" stroke="#333" stroke-width="1" />
    <text x="615" y="170" class="entity-attribute foreign-key">kana_id (INTEGER) FK</text>
    <text x="615" y="185" class="entity-attribute">kanji_text (TEXT)</text>
    
    <!-- sense applies tables -->
    <rect x="605" y="210" width="200" height="120" rx="5" ry="5" class="junction-entity" />
    <text x="705" y="230" text-anchor="middle" class="entity-title">sense_applies_to_*</text>
    <line x1="605" y1="240" x2="805" y2="240" stroke="#333" stroke-width="1" />
    <text x="615" y="260" class="entity-attribute foreign-key">sense_id (INTEGER) FK</text>
    <text x="615" y="275" class="entity-attribute">kanji_text/kana_text (TEXT)</text>
    <text x="615" y="290" class="entity-attribute">jmdict_sense_applies_to_kanji</text>
    <text x="615" y="305" class="entity-attribute">jmdict_sense_applies_to_kana</text>
    
    <!-- Additional JMDict Tables -->
    <rect x="605" y="350" width="200" height="90" rx="5" ry="5" class="entity" />
    <text x="705" y="370" text-anchor="middle" class="entity-title">Additional Tables</text>
    <line x1="605" y1="380" x2="805" y2="380" stroke="#333" stroke-width="1" />
    <text x="615" y="400" class="entity-attribute">jmdict_language_source</text>
    <text x="615" y="415" class="entity-attribute">jmdict_sense_info</text>
    <text x="615" y="430" class="entity-attribute">jmdict_xrefs</text>
    
    <!-- FTS Tables Group Box -->
    <rect x="50" y="480" width="220" height="180" rx="5" ry="5" class="group-box" />
    <text x="70" y="500" class="group-label">Full-Text Search Tables</text>
    
    <!-- jmdict_gloss_fts -->
    <rect x="70" y="520" width="180" height="70" rx="5" ry="5" class="fts-entity" />
    <text x="160" y="540" text-anchor="middle" class="entity-title">jmdict_gloss_fts</text>
    <line x1="70" y1="550" x2="250" y2="550" stroke="#333" stroke-width="1" />
    <text x="80" y="570" class="entity-attribute">text (TEXT)</text>
    <text x="80" y="585" class="entity-attribute">(Virtual FTS5 Table)</text>
    
    <!-- FTS Support Tables -->
    <rect x="70" y="600" width="180" height="50" rx="5" ry="5" class="fts-entity" />
    <text x="160" y="620" text-anchor="middle" class="entity-title">FTS Support Tables</text>
    <line x1="70" y1="630" x2="250" y2="630" stroke="#333" stroke-width="1" />
    <text x="80" y="645" class="entity-attribute">_config, _data, _idx, _docsize</text>
    
    <!-- Tags and Junction Tables Group Box -->
    <rect x="290" y="480" width="250" height="300" rx="5" ry="5" class="group-box" />
    <text x="310" y="500" class="group-label">Tags and Junction Tables</text>
    
    <!-- tags -->
    <rect x="315" y="520" width="200" height="100" rx="5" ry="5" class="entity" />
    <text x="415" y="540" text-anchor="middle" class="entity-title">tags</text>
    <line x1="315" y1="550" x2="515" y2="550" stroke="#333" stroke-width="1" />
    <text x="325" y="570" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="325" y="585" class="entity-attribute">tag (TEXT)</text>
    <text x="325" y="600" class="entity-attribute">description (TEXT)</text>
    <text x="325" y="615" class="entity-attribute">category (TEXT)</text>
    
    <!-- Tag Junction Tables -->
    <rect x="315" y="630" width="200" height="140" rx="5" ry="5" class="junction-entity" />
    <text x="415" y="650" text-anchor="middle" class="entity-title">Tag Junction Tables</text>
    <line x1="315" y1="660" x2="515" y2="660" stroke="#333" stroke-width="1" />
    <text x="325" y="680" class="entity-attribute">jmdict_kanji_tags</text>
    <text x="325" y="695" class="entity-attribute">jmdict_kana_tags</text>
    <text x="325" y="710" class="entity-attribute">jmdict_sense_pos</text>
    <text x="325" y="725" class="entity-attribute">jmdict_sense_field</text>
    <text x="325" y="740" class="entity-attribute">jmdict_sense_misc</text>
    <text x="325" y="755" class="entity-attribute">jmdict_sense_dialect</text>
    
    <!-- Kanjidic Section Title -->
    <text x="600" y="820" text-anchor="middle" class="section-title">Kanjidic2 Tables</text>
    
    <!-- Kanjidic Core Tables Group Box -->
    <rect x="50" y="840" width="500" height="380" rx="5" ry="5" class="group-box" />
    <text x="70" y="860" class="group-label">Core Tables</text>
    
    <!-- kanjidic_characters -->
    <rect x="70" y="880" width="200" height="115" rx="5" ry="5" class="entity" />
    <text x="170" y="900" text-anchor="middle" class="entity-title">kanjidic_characters</text>
    <line x1="70" y1="910" x2="270" y2="910" stroke="#333" stroke-width="1" />
    <text x="80" y="930" class="entity-attribute primary-key">literal (TEXT) PK</text>
    <text x="80" y="945" class="entity-attribute">grade (INTEGER)</text>
    <text x="80" y="960" class="entity-attribute">stroke_count (INTEGER)</text>
    <text x="80" y="975" class="entity-attribute">frequency (INTEGER)</text>
    <text x="80" y="990" class="entity-attribute">jlpt_level (INTEGER)</text>
    
    <!-- kanjidic_readings -->
    <rect x="70" y="1005" width="200" height="100" rx="5" ry="5" class="entity" />
    <text x="170" y="1025" text-anchor="middle" class="entity-title">kanjidic_readings</text>
    <line x1="70" y1="1035" x2="270" y2="1035" stroke="#333" stroke-width="1" />
    <text x="80" y="1055" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="80" y="1070" class="entity-attribute foreign-key">character (TEXT) FK</text>
    <text x="80" y="1085" class="entity-attribute">type (TEXT)</text>
    <text x="80" y="1100" class="entity-attribute">value (TEXT)</text>
    
    <!-- kanjidic_meanings -->
    <rect x="70" y="1115" width="200" height="100" rx="5" ry="5" class="entity" />
    <text x="170" y="1135" text-anchor="middle" class="entity-title">kanjidic_meanings</text>
    <line x1="70" y1="1145" x2="270" y2="1145" stroke="#333" stroke-width="1" />
    <text x="80" y="1165" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="80" y="1180" class="entity-attribute foreign-key">character (TEXT) FK</text>
    <text x="80" y="1195" class="entity-attribute">lang (TEXT)</text>
    <text x="80" y="1210" class="entity-attribute">value (TEXT)</text>
    
    <!-- kanjidic_radicals -->
    <rect x="330" y="880" width="200" height="90" rx="5" ry="5" class="entity" />
    <text x="430" y="900" text-anchor="middle" class="entity-title">kanjidic_radicals</text>
    <line x1="330" y1="910" x2="530" y2="910" stroke="#333" stroke-width="1" />
    <text x="340" y="930" class="entity-attribute primary-key">id (INTEGER) PK</text>
    <text x="340" y="945" class="entity-attribute foreign-key">character (TEXT) FK</text>
    <text x="340" y="960" class="entity-attribute">type (TEXT)</text>
    <text x="340" y="975" class="entity-attribute">value (INTEGER)</text>
    
    <!-- Kanjidic FTS and Additional Tables Group Box -->
    <rect x="580" y="840" width="500" height="380" rx="5" ry="5" class="group-box" />
    <text x="600" y="860" class="group-label">Additional Tables and FTS</text>
    
    <!-- Additional Kanjidic Tables -->
    <rect x="600" y="880" width="200" height="150" rx="5" ry="5" class="entity" />
    <text x="700" y="900" text-anchor="middle" class="entity-title">Additional Tables</text>
    <line x1="600" y1="910" x2="800" y2="910" stroke="#333" stroke-width="1" />
    <text x="610" y="930" class="entity-attribute">kanjidic_codepoints</text>
    <text x="610" y="945" class="entity-attribute">kanjidic_variants</text>
    <text x="610" y="960" class="entity-attribute">kanjidic_dict_references</text>
    <text x="610" y="975" class="entity-attribute">kanjidic_query_codes</text>
    <text x="610" y="990" class="entity-attribute">kanjidic_radical_names</text>
    <text x="610" y="1005" class="entity-attribute">kanjidic_nanori</text>
    
    <!-- kanjidic_meanings_fts -->
    <rect x="600" y="1050" width="200" height="70" rx="5" ry="5" class="fts-entity" />
    <text x="700" y="1070" text-anchor="middle" class="entity-title">kanjidic_meanings_fts</text>
    <line x1="600" y1="1080" x2="800" y2="1080" stroke="#333" stroke-width="1" />
    <text x="610" y="1100" class="entity-attribute">value (TEXT)</text>
    <text x="610" y="1115" class="entity-attribute">(Virtual FTS5 Table)</text>
    
    <!-- Relationships -->
    <!-- Arrow markers -->
    <defs>
        <marker id="arrow-primary" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#4a86e8"/>
        </marker>
        <marker id="arrow-secondary" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#6aa84f"/>
        </marker>
        <marker id="arrow-fts" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#9c27b0"/>
        </marker>
        <marker id="arrow-junction" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L0,6 L9,3 z" fill="#e69138"/>
        </marker>
    </defs>
    
    <!-- JMDict Core Relationships -->
    <!-- jmdict_entries to jmdict_sense (PRIMARY) -->
    <path d="M 270,140 L 290,140 L 290,110 L 310,110 L 310,135 L 330,135" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="290" y="100" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- jmdict_entries to jmdict_kanji (PRIMARY) -->
    <path d="M 270,155 L 290,155 L 290,255 L 270,255" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="275" y="245" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- jmdict_entries to jmdict_kana (PRIMARY) -->
    <path d="M 170,190 L 170,210 L 50,210 L 50,365 L 70,365" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="55" y="355" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- jmdict_sense to jmdict_gloss (PRIMARY) -->
    <path d="M 530,155 L 550,155 L 550,255 L 530,255" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="535" y="245" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- JMDict Junction Relationships -->
    <!-- jmdict_sense to sense_applies_to_* (JUNCTION) -->
    <path d="M 530,120 L 565,120 L 565,40 L 840,40 L 840,270 L 805,270" class="relationship rel-junction" marker-end="url(#arrow-junction)"/>
    <text x="815" y="260" class="cardinality" fill="#e69138">1:*</text>
    
    <!-- jmdict_kana to jmdict_kana_to_kanji (JUNCTION) -->
    <path d="M 270,370 L 540,370 L 540,40 L 705,40 L 705,120" class="relationship rel-junction" marker-end="url(#arrow-junction)"/>
    <text x="710" y="110" class="cardinality" fill="#e69138">1:*</text>
    
    <!-- JMDict Secondary Relationships -->
    <!-- jmdict_sense to Additional Tables (SECONDARY) -->
    <path d="M 530,150 L 560,150 L 560,395 L 605,395" class="relationship rel-secondary" marker-end="url(#arrow-secondary)"/>
    <text x="585" y="385" class="cardinality" fill="#6aa84f">1:*</text>
    
    <!-- tags to Tag Junction Tables (SECONDARY) -->
    <path d="M 415,620 L 415,630" class="relationship rel-secondary" marker-end="url(#arrow-secondary)"/>
    <text x="425" y="625" class="cardinality" fill="#6aa84f">1:*</text>
    
    <!-- FTS Relationships -->
    <!-- jmdict_gloss to jmdict_gloss_fts (FTS) -->
    <path d="M 330,305 L 30,305 L 30,555 L 70,555" class="relationship rel-fts" stroke-dasharray="5,5" marker-end="url(#arrow-fts)"/>
    <text x="35" y="540" class="cardinality" fill="#9c27b0">FTS Index</text>
    
    <!-- jmdict_gloss_fts to FTS Support Tables (FTS) -->
    <path d="M 160,590 L 160,600" class="relationship rel-fts" stroke-dasharray="5,5"/>
    
    <!-- Kanjidic Core Relationships -->
    <!-- kanjidic_characters to kanjidic_radicals (PRIMARY) -->
    <path d="M 270,910 L 290,910 L 290,875 L 310,875 L 310,895 L 330,895" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="290" y="865" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- kanjidic_characters to kanjidic_readings (PRIMARY) -->
    <path d="M 270,935 L 290,935 L 290,1040 L 270,1040" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="275" y="1030" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- kanjidic_characters to kanjidic_meanings (PRIMARY) -->
    <path d="M 70,940 L 50,940 L 50,1150 L 70,1150" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="55" y="1140" class="cardinality" fill="#4a86e8">1:*</text>
    
    <!-- Kanjidic Secondary Relationships -->
    <!-- kanjidic_characters to Additional Tables (SECONDARY) -->
    <path d="M 270,895 L 290,895 L 290,840 L 550,840 L 550,950 L 600,950" class="relationship rel-secondary" marker-end="url(#arrow-secondary)"/>
    <text x="580" y="940" class="cardinality" fill="#6aa84f">1:*</text>
    
    <!-- Kanjidic FTS Relationships -->
    <!-- kanjidic_meanings to kanjidic_meanings_fts (FTS) -->
    <path d="M 270,1130 L 550,1130 L 550,1085 L 600,1085" class="relationship rel-fts" stroke-dasharray="5,5" marker-end="url(#arrow-fts)"/>
    <text x="450" y="1115" class="cardinality" fill="#9c27b0">FTS Index</text>
    
    <!-- Legend -->
    <rect x="50" y="1250" width="1100" height="250" rx="5" ry="5" fill="#f9f9f9" stroke="#333" stroke-width="1" />
    <text x="600" y="1270" text-anchor="middle" class="section-title">Legend</text>
    
    <rect x="100" y="1290" width="20" height="20" fill="#f5f5f5" stroke="#333" stroke-width="2" />
    <text x="130" y="1305" class="entity-attribute">Core Entity Table</text>
    
    <rect x="300" y="1290" width="20" height="20" fill="#e6f2ff" stroke="#333" stroke-width="2" />
    <text x="330" y="1305" class="entity-attribute">Full-Text Search Table</text>
    
    <rect x="500" y="1290" width="20" height="20" fill="#fff2cc" stroke="#333" stroke-width="2" />
    <text x="530" y="1305" class="entity-attribute">Junction/Relationship Table</text>
    
    <rect x="700" y="1290" width="20" height="20" fill="none" stroke="#999" stroke-width="1" stroke-dasharray="5,5" />
    <text x="730" y="1305" class="entity-attribute">Logical Grouping</text>
    
    <text x="100" y="1335" class="entity-attribute primary-key">Primary Key (PK)</text>
    
    <text x="300" y="1335" class="entity-attribute foreign-key">Foreign Key (FK)</text>
    
    <!-- Relationship types -->
    <line x1="100" y1="1365" x2="150" y2="1365" class="relationship rel-primary" marker-end="url(#arrow-primary)"/>
    <text x="160" y="1370" class="entity-attribute">Primary Relationship (Core Tables)</text>
    
    <line x1="400" y1="1365" x2="450" y2="1365" class="relationship rel-secondary" marker-end="url(#arrow-secondary)"/>
    <text x="460" y="1370" class="entity-attribute">Secondary Relationship</text>
    
    <line x1="700" y1="1365" x2="750" y2="1365" class="relationship rel-junction" marker-end="url(#arrow-junction)"/>
    <text x="760" y="1370" class="entity-attribute">Junction Table Relationship</text>
    
    <line x1="100" y1="1395" x2="150" y2="1395" class="relationship rel-fts" stroke-dasharray="5,5" marker-end="url(#arrow-fts)"/>
    <text x="160" y="1400" class="entity-attribute">Full-Text Search Relationship</text>
    
    <text x="100" y="1425" class="entity-attribute">* The diagram shows the main tables and relationships. Some auxiliary tables are grouped for clarity.</text>
    <text x="100" y="1465" class="entity-attribute">* The database contains 36 tables in total, including SQLite internal tables.</text>
    <text x="100" y="1485" class="entity-attribute">* FTS tables include triggers to maintain synchronization with content tables.</text>
    
    <!-- Footer -->
    <text x="600" y="1520" text-anchor="middle" class="entity-attribute">JMDict and Kanjidic2 SQLite Converter - Database Schema</text>
</svg> 